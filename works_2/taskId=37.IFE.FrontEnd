<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-sweb-app-capable" content="yes"><meta name="keywords" content="前端, 前端开发, web前端, 前端开发工程师, CSS, JavaScript, HTML, Web标准"><meta name="description" content="百度前端技术学院"><link rel="shortcut icon" href="/asset/img/favicon.ico" type="image/x-icon"><link rel="icon" href="/asset/img/favicon.ico" type="image/x-icon"><link rel="bookmark" href="/asset/img/favicon.ico" type="image/x-icon"><title>百度前端技术学院</title>
<link href="//ife.baidu.com/asset/css/review/reviewDetail_ad83eb8a.css" rel="stylesheet">
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?d422e3cabaaaa7445e54622b97472bab";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>





</head><body class="result-op"><div id="viewport"><header ><nav class="navbar navbar-default container ife-header"><div class="row"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="navbar-brand ife-logo"><a href="//ife.baidu.com"><img src="/asset/img/logo.png"></a></div></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/task/all">任务</a></li><li><a href="/note/all">学习笔记</a></li><li><a href="/statistic/index">统计</a></li><li class="user-dropdown"><a href="https://openapi.baidu.com/oauth/2.0/authorize?client_id=89XtMi6980UVMb5iMiRAL27g&response_type=code&redirect_uri=http%3A%2F%2Fife.baidu.com%2Flog%2Fin&scope=&state=9e8966f9c5f0463d4b9ac54f48262e34&display=page">登录</a></li></ul></div></div></nav></header>
<main class="container review-detail-page"><div class="breadcrumb nav-title"><span class="active">任务三十七：UI组件之浮出层（<a href="/task/detail?taskId=37">查看详情</a>）</span></div><div class="main"><div class="submit-group-info"><h4>团队：<a href="/group/profile?groupId=925" target="_blank">IFE.FrontEnd</a></h4><p class="submit-basic"><span class="submit-time"><a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;更新于<em>04-28 10:33</em></span><span class="review-num">已经有<em>10</em>人 review</span><span class="score">平均得分：<em>7.8</em></span></p><p>代码地址：<a href="https://github.com/pcdqc/IFE.FrontEnd/tree/master/TeamIntro/public/task/task-37" target="_blank">https://github.com/pcdqc/IFE.FrontEnd/tree/master/TeamIntro/public/task/task-37</a></p><p>demo：<a href="http://ife-frontend.com/task/task-37/" target="_blank">http://ife-frontend.com/task/task-37/</a></p><p class="submit-descr">原生JS封装成了一个弹窗插件POP.js~~ 欢迎review<br />
<br />
总共暴露三个方法，<br />
POP.alert() &amp; POP.confirm() &amp;POP.prompt() <br />
都可以传入两个参数<br />
第一个参数为必须【string】:  弹窗的主要内容<br />
<br />
第二个参数可以为三种类型<br />
【string】:&quot;success&quot;,&quot;error&quot;,&quot;warning&quot;,other<br />
 分别为四种不同的弹窗主题<br />
<br />
【function(data)】:回调函数，当使用confirm/prompt方法时, data为true(false)/input输入的值;<br />
<br />
【object】:三个属性(可选单个或多个)例如 <br />
type : &#039;&#039;success&quot;,  //主题<br />
callback : fn, //回调函数<br />
title: &quot;自定义弹窗&quot;  //自定义标题<br />
<br />
PS:<br />
键盘ESC = 点击灰色幕布 = 关闭弹窗 = 不执行回调<br />
键盘Enter = 点击确认按钮<br />
内容高度自适应(有最小高度)，弹出窗可拖拽OvO~</p></div><ul class="review-result-list container-fluid"><li class="row review-result" data-id="2451"><div class="review-user clearfix"><span class="pull-left"><span class="text-success">导师</span><span class="time-info">review&nbsp;<span class="time">04-25 16:55</span><span class="update-time">（04-25 16:55&nbsp;更新）</span></span></span><span class="pull-right score-info"><span class="score text-success">6</span><span class="text-muted">分</span></span></div><div class="review-comment"><span class="comment">LIne 16: 非常多的重复代码，可以精简一下<br />
Line 44: 所有的事件处理函数都不应该是一个组件外部的变量，应该是对象里的一个方法，如 onDrage (e) {// ...}<br />
Line 79: 参数校验这部分不应该放在这里，放到 constrctor 里面<br />
Line 133: unique也不应该在外部定义，应该支持一下页面有多个弹窗<br />
Line 155: 重复代码<br />
var THEMES = {<br />
    success: &#039;Success!&#039;<br />
};<br />
var _this = this;<br />
Object.keys(THEMES).map(function (key) {<br />
    _this.model.className = &#039;POP-model POP-&#039; + key;<br />
    _this.title.innerHTML = THEMES[key];<br />
});<br />
Line 190: 重复代码<br />
[&#039;alert&#039;, &#039;confirm&#039;, &#039;prompt&#039;].map(function (name){<br />
      POP[name] = function(txt, config) {<br />
			var layer = this.single(txt, config);<br />
			if(layer){<br />
				layer[name]();<br />
			}<br />
		};<br />
});</span></div></li><li class="row review-result" data-id="2254"><div class="review-user clearfix"><span class="pull-left"><a href="/group/profile?groupId=2628" target="_blank">AlphaRun</a><span class="time-info">review&nbsp;<span class="time">04-16 11:50</span><span class="update-time">（<a href="/user/profile?userId=7019" target="_blank">颜适</a>&nbsp;04-24 20:26&nbsp;更新）</span></span></span><span class="pull-right score-info"><span class="score text-success">9</span><span class="text-muted">分</span></span></div><div class="review-comment"><span class="comment">操作DOM那段一塌糊涂啊。<br />
一大坨createElement, className, appendChild非常糟糕，可读性为零，效率也低，为什么不考虑innerHTML呢？<br />
还好基本功能实现了。<br />
欢迎互相review。http://ife.baidu.com/review/detail?workId=9157</span><ul class="reply-wrap"><li class="reply"style="display:block;" data-id=927><p class="reply-info">作者<a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;回复&nbsp;<span class="time">04-16 18:37</span></p><p class="reply-content">= =没讨论单例模式啊，只不过刚好做弹窗用到了，里面的一小部分而已。我觉得我这样维护起来比用innerHTML好多了，整个生成的弹窗的所有部分都是该实例的一个属性，维护起来简单明了..感觉你被你的什么MVC思想扭曲了, 你说前端框架MVC也好MVVM也好也就罢了,,写个小插件也谈MVC.也构不成MVC, 插件只需要做好内部操作, 提供设置接口给外部调用..(关于innerHTML可以去看看面向对象编程, 这是使用innerHTML无法做到的,创建保存DOM节点)</p></li><li class="reply" data-id=926><p class="reply-info"><a href="/user/profile?userId=7019">颜适</a>&nbsp;回复&nbsp;<span class="time">04-16 18:15</span></p><p class="reply-content">我没说单例模式不好。只是不知道为何你如此执着使用大量DOM操作来构建View层，这在维护组件的时候是很蛋疼的。如果你把View层分离，那么以后就算修改组件的交互，只要给View层传入参数，就能得到修改后的结果。但现在的话，你还要先读读那一大坨的DOM操作代码。</p></li><li class="reply" data-id=925><p class="reply-info">作者<a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;回复&nbsp;<span class="time">04-16 17:40</span></p><p class="reply-content">虽然不知道你为什么一直在提MVC, MVC这种东西谁都知道吧,但是我愣是不知道跟代码该怎么写有什么联系,,封装一个插件最关键的还是面向对象编程吧, 每次调用都实例一个唯一的Layer弹窗对象, 所有可操作的节点保存在该对象中, 所有的操作都能在对象内部完成, 如果用innerHTML拼接我是不是每次操作都要去取节点, 而且事件绑定是不是还需要委托,....还有我这种也不是反复插入, 真正插入页面的appendChild只有一处而已, 插入body的</p></li><li class="reply" data-id=923><p class="reply-info"><a href="/user/profile?userId=7019">颜适</a>&nbsp;回复&nbsp;<span class="time">04-16 17:25</span></p><p class="reply-content">我指的效率就是那一堆create和append比innerHTML慢。<br />
以及，如果你知道MVC的话，代码肯定不会写成这样了，这是我说的可读性问题。<br />
innerHTML的效率问题是不值一提的。你可以先拼接好字符串，再一次插入innerHTML，而不是反复插入。</p></li><li class="reply" data-id=914><p class="reply-info">作者<a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;回复&nbsp;<span class="time">04-16 12:58</span></p><p class="reply-content">不知道你所说的可读性为零和效率很低是按什么标准来的.<br />
使用createElement创建节点，可以很方便的对每一个创建的节点分别进行操作，绑定移除事件等，可读性不低，我想如果使用的innerHTML的话，使用一串长长的字符串来添加元素节点，然后绑定事件的时候再给document代理点击事件，然后取到innerHTML时附带的class绑定，然后要操作的时候每次都要取一次class。而我的Class只是单纯样式用的。并且innerHTML据我所了解是会替换原节点下面的内容，意味着HTML加载并解析，使得原DOM节点下进行页面重排，而appendChild只会部分重排，所以不知道你的效率低是怎么得出来的，希望能提供相关文档涨涨姿势，虽然我那初始化时一大坨createElement肯定比innerHTML要多,但是我的每一个dom节点是绑定在创建的唯一实例上的，增加或修改各个部分功能肯定比那反锁的取Class操作要方便得多，相信到最后那那所说那种可读性才是真正的零。<br />
最后还是谢谢review，有不对的地方欢迎讨论</p></li><li class="show-more"><button class="more-btn btn btn-link">显示全部（共<em>5</em>条评论）</button></li></ul></div></li><li class="row review-result" data-id="2381"><div class="review-user clearfix"><span class="pull-left"><a href="/group/profile?groupId=924" target="_blank">来自远方的他叔叔军团</a><span class="time-info">review&nbsp;<span class="time">04-22 10:35</span><span class="update-time">（<a href="/user/profile?userId=4667" target="_blank">孙浩</a>&nbsp;04-22 10:35&nbsp;更新）</span></span></span><span class="pull-right score-info"><span class="score text-success">8</span><span class="text-muted">分</span></span></div><div class="review-comment"><span class="comment">看了下代码 很清晰 主要给自己提供了思路</span><ul class="reply-wrap"><li class="reply"style="display:block;" data-id=980><p class="reply-info"><a href="/user/profile?userId=4667">孙浩</a>&nbsp;回复&nbsp;<span class="time">04-22 10:41</span></p><p class="reply-content">赞</p></li></ul></div></li><li class="row review-result" data-id="2249"><div class="review-user clearfix"><span class="pull-left"><a href="/group/profile?groupId=2879" target="_blank">DUT-FEDXXX</a><span class="time-info">review&nbsp;<span class="time">04-16 11:08</span><span class="update-time">（<a href="/user/profile?userId=7732" target="_blank">范廷雷</a>&nbsp;04-16 11:08&nbsp;更新）</span></span></span><span class="pull-right score-info"><span class="score text-success">9</span><span class="text-muted">分</span></span></div><div class="review-comment"><span class="comment">这个棒，封装性很好！！！！完全可以成为一个独立的组件，而且还有事件的移除，赞！！！</span><ul class="reply-wrap"><li class="reply"style="display:block;" data-id=915><p class="reply-info">作者<a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;回复&nbsp;<span class="time">04-16 13:13</span></p><p class="reply-content">谢谢支持OvO~~~</p></li></ul></div></li><li class="row review-result" data-id="2209"><div class="review-user clearfix"><span class="pull-left"><a href="/group/profile?groupId=3324" target="_blank">江安职业高中</a><span class="time-info">review&nbsp;<span class="time">04-14 20:27</span><span class="update-time">（<a href="/user/profile?userId=8861" target="_blank">梁誉译</a>&nbsp;04-14 20:27&nbsp;更新）</span></span></span><span class="pull-right score-info"><span class="score text-success">9</span><span class="text-muted">分</span></span></div><div class="review-comment"><span class="comment">我看了那么多代码我最喜欢的，对于pop进行了封装，用户体验也可以。看了你的代码学习到了很多，谢谢。</span><ul class="reply-wrap"><li class="reply"style="display:block;" data-id=899><p class="reply-info">作者<a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;回复&nbsp;<span class="time">04-14 20:40</span></p><p class="reply-content">谢谢支持~~~</p></li></ul></div></li><li class="row review-result" data-id="2158"><div class="review-user clearfix"><span class="pull-left"><a href="/group/profile?groupId=2038" target="_blank">code matters</a><span class="time-info">review&nbsp;<span class="time">04-13 13:53</span><span class="update-time">（<a href="/user/profile?userId=5320" target="_blank">彭君怡</a>&nbsp;04-13 13:53&nbsp;更新）</span></span></span><span class="pull-right score-info"><span class="score text-success">5</span><span class="text-muted">分</span></span></div><div class="review-comment"><span class="comment">(index):69 Uncaught ReferenceError: POP is not defined 楼主这个修改了下？为什么我火狐和谷歌浏览器都报这个错？</span><ul class="reply-wrap"><li class="reply"style="display:block;" data-id=896><p class="reply-info"><a href="/user/profile?userId=8861">梁誉译</a>&nbsp;回复&nbsp;<span class="time">04-14 20:28</span></p><p class="reply-content">并不是火狐的问题或者代码的问题，我火狐没事。</p></li><li class="reply" data-id=884><p class="reply-info">作者<a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;回复&nbsp;<span class="time">04-14 12:49</span></p><p class="reply-content">...那是什么 , 广告拦截吗~</p></li><li class="reply" data-id=878><p class="reply-info"><a href="/user/profile?userId=983">孟浩</a>&nbsp;回复&nbsp;<span class="time">04-14 08:06</span></p><p class="reply-content">我也报这个错, 你的pop.js被adblock屏蔽了, 改个名就好了</p></li><li class="reply" data-id=864><p class="reply-info">作者<a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;回复&nbsp;<span class="time">04-13 16:11</span></p><p class="reply-content">这不是代码问题吧,,,JS文件没载进来, 就你会的样子</p></li><li class="show-more"><button class="more-btn btn btn-link">显示全部（共<em>4</em>条评论）</button></li></ul></div></li><li class="row review-result" data-id="2154"><div class="review-user clearfix"><span class="pull-left"><a href="/group/profile?groupId=691" target="_blank">XD微客</a><span class="time-info">review&nbsp;<span class="time">04-13 10:48</span><span class="update-time">（<a href="/user/profile?userId=1626" target="_blank">卢睿韬</a>&nbsp;04-13 10:48&nbsp;更新）</span></span></span><span class="pull-right score-info"><span class="score text-success">8</span><span class="text-muted">分</span></span></div><div class="review-comment"><span class="comment">学习了，不过第一行好像多了个分号。。</span><ul class="reply-wrap"><li class="reply"style="display:block;" data-id=857><p class="reply-info">作者<a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;回复&nbsp;<span class="time">04-13 12:41</span></p><p class="reply-content">谢谢review~~<br />
分号是为了应对代码合并压缩时，由于缺少分号；带来的错误。</p></li></ul></div></li><li class="row review-result" data-id="2122"><div class="review-user clearfix"><span class="pull-left"><a href="/group/profile?groupId=359" target="_blank">sunshine</a><span class="time-info">review&nbsp;<span class="time">04-12 13:39</span><span class="update-time">（<a href="/user/profile?userId=2020" target="_blank">向王涛</a>&nbsp;04-12 13:39&nbsp;更新）</span></span></span><span class="pull-right score-info"><span class="score text-success">7</span><span class="text-muted">分</span></span></div><div class="review-comment"><span class="comment">学习到了，学到一个封装思路</span><ul class="reply-wrap"><li class="reply"style="display:block;" data-id=842><p class="reply-info">作者<a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;回复&nbsp;<span class="time">04-12 14:33</span></p><p class="reply-content">谢谢review~</p></li></ul></div></li><li class="row review-result" data-id="2119"><div class="review-user clearfix"><span class="pull-left"><a href="/group/profile?groupId=2538" target="_blank">freshman</a><span class="time-info">review&nbsp;<span class="time">04-12 12:32</span><span class="update-time">（<a href="/user/profile?userId=6719" target="_blank">安超</a>&nbsp;04-12 12:32&nbsp;更新）</span></span></span><span class="pull-right score-info"><span class="score text-success">9</span><span class="text-muted">分</span></span></div><div class="review-comment"><span class="comment">写的不错啊，其他团队都没怎么做到封装，赞一个！</span><ul class="reply-wrap"><li class="reply"style="display:block;" data-id=841><p class="reply-info">作者<a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;回复&nbsp;<span class="time">04-12 14:33</span></p><p class="reply-content">谢谢review~</p></li></ul></div></li><li class="row review-result" data-id="2108"><div class="review-user clearfix"><span class="pull-left"><a href="/group/profile?groupId=787" target="_blank">Fenomenix</a><span class="time-info">review&nbsp;<span class="time">04-12 09:27</span><span class="update-time">（<a href="/user/profile?userId=6574" target="_blank">肖新宇</a>&nbsp;04-12 09:27&nbsp;更新）</span></span></span><span class="pull-right score-info"><span class="score text-success">8</span><span class="text-muted">分</span></span></div><div class="review-comment"><span class="comment">还不错</span><ul class="reply-wrap"><li class="reply"style="display:block;" data-id=838><p class="reply-info">作者<a href="/user/profile?userId=2329">陈慕杰</a>&nbsp;回复&nbsp;<span class="time">04-12 09:28</span></p><p class="reply-content">谢谢OvO~</p></li></ul></div></li></ul><div class="review-page-wrap" data-total="10" data-page-size="10" data-page-no="1"></div></div></main>
<footer><p><span class="contact">微信公众号：baidu_ife</span><span class="contact">微博：<a target="_blank" href="http://weibo.com/u/5568860641?topnav=1&wvr=6&topsug=1">Baidu前端技术学院</a></span></p><p class="friend-link"><span class="note">友情链接</span><a target="_blank" title="百度EFE前端团队" href="http://efe.baidu.com">百度EFE</a><a target="_blank" href="http://voice.baidu.com">百度语音搜索</a><a href="http://www.chuanke.com/" target="_blank">百度传课</a><a target="_blank" href="http://campus.baidu.com/">百度校园</a><a target="_blank" href="http://talent.baidu.com/external/baidu/campus.html">百度校园招聘</a></p><p><span class="copyright-text"><span>©2016&nbsp;Baidu&nbsp;</span><a href="//www.baidu.com/duty/" target="_blank">使用百度前必读</a>&nbsp;<a href="http://jianyi.baidu.com" target="_blank">意见反馈</a>&nbsp;<span>京ICP证030173号&nbsp;</span></span></p></footer></div><script src="http://s1.bdstatic.com/r/www/cache/ecom/esl/2-1-4/esl.js"></script><script src="https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/js/lib/jquery-1.10.2_d88366fd.js"></script><script src="../../dep/EpicEditor-v0.2.2/js/epiceditor.js"></script><script>require.config({'baseUrl': '//ife.baidu.com/asset','paths': { 'bootstrapvalidator': '../dep/bootstrapvalidator/dist/js/bootstrapValidator' },'waitSeconds': 5,'packages': [{'name': 'etpl','location': '../dep/etpl/3.1.0/asset','main': 'main'},{'name': 'bootstrap','location': '../dep/bootstrap-3.3.5/js'},{'name': 'select2','location': '../dep/select2/dist/js','main': 'select2'},{'name': 'jquery-bootpag','location': '../dep/jquery-bootpag/lib','main': 'jquery.bootpag'},{'name': 'bootstrap-slider','location': '../dep/bootstrap-slider/asset/js','main': 'bootstrap-slider'},{'name': 'saber-emitter','location': '../dep/saber-emitter/1.0.0/asset','main': 'emitter'},{'name': 'marked','location': '../dep/marked/lib','main': 'marked'}],'shim': {'bootstrap/button': ['jquery'],'bootstrap/modal': ['jquery'],'bootstrap/collapse': ['jquery'],'bootstrap/dropdown': ['jquery'],'bootstrap/tab': ['jquery'],'bootstrapvalidator': ['jquery'],'jquery-bootpag/jquery.bootpag': ['jquery']}});</script>
<script>
    require(['review/reviewDetail_e5394537'], function (app) {
        app.init({"login":0,"taskUrl":"\/task\/all","noteUrl":"\/note\/all","statisticUrl":"\/statistic\/index","loginUrl":"https:\/\/openapi.baidu.com\/oauth\/2.0\/authorize?client_id=89XtMi6980UVMb5iMiRAL27g&response_type=code&redirect_uri=http%3A%2F%2Fife.baidu.com%2Flog%2Fin&scope=&state=9e8966f9c5f0463d4b9ac54f48262e34&display=page"}, {
            taskId: 37,
            workId: 8836,
            groupId: 925,
            allowAddReview: 0,
            allowUpdateReview: 0        });
    });
</script>
</body>
</html>
